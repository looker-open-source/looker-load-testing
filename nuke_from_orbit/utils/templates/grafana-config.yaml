---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-config
  labels:
    name: grafana-config
data:
  grafana.ini: |-
    [auth.anonymous]
    enabled = true
    org_role = Admin
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-datasource-conf
  labels:
    name: grafana-datasource-conf
data:
  datasource.yml: |-
    apiVersion: 1
    datasources:
      - name: Prometheus
        type: prometheus
        access: proxy
        url: 'http://prom-pod:80'
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-prov-conf
  labels:
    name: grafana-dashboard-prov-conf
data:
  dashboards.yml: |-
    apiVersion: 1
    providers:
      - name: 'locust_dashes'
        orgId: 1
        folder: ''
        folderUid: ''
        type: file
        disableDeletion: false
        editable: true
        updateIntervalSeconds: 30
        allowUiUpdates: false
        options:
          path: /var/lib/grafana/dashboards
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-json-conf
  labels:
    name: grafana-dashboard-json-conf
data:
  dashboard.json: |-
		{ "annotations": { "list": [ { "builtIn": 1, "datasource": "-- Grafana --", "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "limit": 100, "name": "Annotations & Alerts", "showIn": 0, "type": "dashboard" } ] }, "description": "Locust Exporter", "editable": true, "gnetId": 11985, "graphTooltip": 0, "links": [], "panels": [ { "cacheTimeout": null, "datasource": "Prometheus", "fieldConfig": { "defaults": { "custom": {}, "mappings": [ { "id": 0, "op": "=", "text": "Hatching", "type": 1, "value": "1" }, { "id": 1, "op": "=", "text": "Stop", "type": 1, "value": "0" }, { "id": 2, "op": "=", "text": "Running", "type": 1, "value": "2" } ], "nullValueMode": "connected", "thresholds": { "mode": "absolute", "steps": [ { "color": "rgba(245, 54, 54, 0.9)", "value": null }, { "color": "rgba(237, 129, 40, 0.89)", "value": 0 }, { "color": "rgba(50, 172, 45, 0.97)", "value": 2 } ] }, "unit": "none" }, "overrides": [] }, "gridPos": { "h": 4, "w": 4, "x": 0, "y": 0 }, "id": 1, "interval": null, "links": [], "maxDataPoints": 100, "options": { "colorMode": "value", "fieldOptions": { "calcs": [ "mean" ] }, "graphMode": "area", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "last" ], "fields": "", "values": false }, "textMode": "auto" }, "pluginVersion": "7.1.0", "targets": [ { "expr": "locust_running", "interval": "", "intervalFactor": 2, "legendFormat": "", "metric": "", "refId": "A", "step": 20 } ], "title": "Locust Status", "type": "stat" }, { "cacheTimeout": null, "datasource": "Prometheus", "fieldConfig": { "defaults": { "custom": {}, "mappings": [ { "id": 0, "op": "=", "text": "N/A", "type": 1, "value": "null" } ], "nullValueMode": "connected", "thresholds": { "mode": "absolute", "steps": [ { "color": "blue", "value": null } ] }, "unit": "none" }, "overrides": [] }, "gridPos": { "h": 4, "w": 4, "x": 4, "y": 0 }, "id": 2, "interval": null, "links": [], "maxDataPoints": 100, "options": { "colorMode": "value", "fieldOptions": { "calcs": [ "mean" ] }, "graphMode": "area", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "last" ], "fields": "", "values": false }, "textMode": "auto" }, "pluginVersion": "7.1.0", "targets": [ { "expr": "locust_users", "interval": "", "intervalFactor": 2, "legendFormat": "", "refId": "A", "step": 20 } ], "title": "Swarmed users", "type": "stat" }, { "cacheTimeout": null, "datasource": "Prometheus", "fieldConfig": { "defaults": { "custom": {}, "decimals": 2, "mappings": [ { "id": 0, "op": "=", "text": "N/A", "type": 1, "value": "null" } ], "nullValueMode": "connected", "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] }, "unit": "short" }, "overrides": [] }, "gridPos": { "h": 8, "w": 6, "x": 8, "y": 0 }, "id": 4, "interval": null, "links": [], "maxDataPoints": 100, "options": { "colorMode": "value", "fieldOptions": { "calcs": [ "mean" ] }, "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "pluginVersion": "7.1.0", "targets": [ { "expr": "locust_requests_current_rps{job=\"locust\", name=\"Aggregated\"}", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "", "refId": "A", "step": 20 } ], "timeFrom": null, "timeShift": null, "title": "Current RPS", "type": "stat" }, { "datasource": "Prometheus", "fieldConfig": { "defaults": { "custom": {}, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null } ] } }, "overrides": [] }, "gridPos": { "h": 5, "w": 4, "x": 14, "y": 0 }, "id": 18, "options": { "colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": [ "last" ], "fields": "", "values": false }, "textMode": "auto" }, "pluginVersion": "7.1.0", "targets": [ { "expr": "locust_requests_num_requests{method=~\"\"}", "interval": "", "legendFormat": "", "refId": "A" } ], "timeFrom": null, "timeShift": null, "title": "Requests", "type": "stat" }, { "datasource": "Prometheus", "fieldConfig": { "defaults": { "custom": { "align": null }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 3000 } ] } }, "overrides": [] }, "gridPos": { "h": 8, "w": 6, "x": 18, "y": 0 }, "id": 6, "links": [], "options": { "orientation": "auto", "reduceOptions": { "calcs": [ "mean" ], "fields": "", "values": false }, "showThresholdLabels": false, "showThresholdMarkers": true }, "pluginVersion": "7.1.0", "targets": [ { "expr": "avg(locust_requests_max_response_time)", "intervalFactor": 2, "legendFormat": "AVG MAX", "refId": "A", "step": 2 }, { "expr": "avg(locust_requests_min_response_time)", "intervalFactor": 2, "legendFormat": "AVG MIN", "metric": "", "refId": "B", "step": 2 }, { "expr": "avg(locust_requests_avg_response_time)", "intervalFactor": 2, "legendFormat": "AVG AVG", "metric": "", "refId": "C", "step": 2 }, { "expr": "avg(locust_requests_median_response_time)", "intervalFactor": 2, "legendFormat": "AVG MEDIAN", "refId": "D", "step": 2 } ], "timeFrom": null, "timeShift": null, "title": "Response Times", "type": "gauge" }, { "datasource": "Prometheus", "fieldConfig": { "defaults": { "custom": { "align": null }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "yellow", "value": 1.8 }, { "color": "red", "value": 2.0005 } ] } }, "overrides": [] }, "gridPos": { "h": 4, "w": 4, "x": 0, "y": 4 }, "id": 27, "options": { "colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": [ "last" ], "fields": "", "values": false }, "textMode": "auto" }, "pluginVersion": "7.1.0", "targets": [ { "expr": "locust_users", "interval": "", "legendFormat": "", "refId": "A" }, { "expr": "locust_slaves_count", "interval": "", "legendFormat": "", "refId": "B" } ], "timeFrom": null, "timeShift": null, "title": "Users/Worker Ratio", "transformations": [ { "id": "seriesToColumns", "options": {} }, { "id": "calculateField", "options": { "alias": "Users/Worker Pods", "binary": { "left": "locust_users{instance=\"le-pod:80\", job=\"locust\"}", "operator": "/", "reducer": "sum", "right": "locust_slaves_count{instance=\"le-pod:80\", job=\"locust\"}" }, "mode": "binary", "reduce": { "reducer": "sum" } } }, { "id": "organize", "options": { "excludeByName": { "Time": false, "locust_slaves_count{instance=\"le-pod:80\", job=\"locust\"}": true, "locust_users{instance=\"le-pod:80\", job=\"locust\"}": true }, "indexByName": {}, "renameByName": {} } } ], "type": "stat" }, { "cacheTimeout": null, "datasource": "Prometheus", "fieldConfig": { "defaults": { "custom": {}, "mappings": [ { "id": 0, "op": "=", "text": "N/A", "type": 1, "value": "" } ], "nullValueMode": "connected", "thresholds": { "mode": "absolute", "steps": [ { "color": "blue", "value": null } ] }, "unit": "none" }, "overrides": [] }, "gridPos": { "h": 4, "w": 4, "x": 4, "y": 4 }, "id": 3, "interval": null, "links": [], "maxDataPoints": 100, "options": { "colorMode": "value", "fieldOptions": { "calcs": [ "mean" ] }, "graphMode": "area", "justifyMode": "auto", "orientation": "horizontal", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "pluginVersion": "7.1.0", "targets": [ { "expr": "locust_slaves_count", "interval": "", "intervalFactor": 2, "legendFormat": "", "refId": "A", "step": 20 } ], "title": "Connected workers", "type": "stat" }, { "datasource": "Prometheus", "fieldConfig": { "defaults": { "custom": {}, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "red", "value": null } ] } }, "overrides": [] }, "gridPos": { "h": 3, "w": 4, "x": 14, "y": 5 }, "id": 19, "options": { "colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": [ "mean" ], "fields": "", "values": false }, "textMode": "auto" }, "pluginVersion": "7.1.0", "targets": [ { "expr": "locust_requests_num_failures{method=~\"\"}", "interval": "", "legendFormat": "", "refId": "A" } ], "timeFrom": null, "timeShift": null, "title": "Failures", "type": "stat" }, { "columns": [], "datasource": "Prometheus", "fieldConfig": { "defaults": { "custom": {} }, "overrides": [] }, "fontSize": "100%", "gridPos": { "h": 6, "w": 24, "x": 0, "y": 8 }, "id": 14, "pageSize": null, "showHeader": true, "sort": { "col": 0, "desc": true }, "styles": [ { "alias": "Time", "align": "auto", "dateFormat": "YYYY-MM-DD HH:mm:ss", "pattern": "Time", "type": "hidden" }, { "alias": "Method", "align": "auto", "colorMode": null, "colors": [ "rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)" ], "dateFormat": "YYYY-MM-DD HH:mm:ss", "decimals": 2, "mappingType": 1, "pattern": "method", "preserveFormat": false, "thresholds": [], "type": "string", "unit": "short" }, { "alias": "URL", "align": "auto", "colorMode": null, "colors": [ "rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)" ], "dateFormat": "YYYY-MM-DD HH:mm:ss", "decimals": 2, "mappingType": 1, "pattern": "name", "thresholds": [], "type": "string", "unit": "short" }, { "alias": "MIN RT", "align": "", "colorMode": null, "colors": [ "rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)" ], "dateFormat": "YYYY-MM-DD HH:mm:ss", "decimals": 0, "mappingType": 1, "pattern": "Value #A", "thresholds": [], "type": "number", "unit": "ms" }, { "alias": "Errors", "align": "", "colorMode": null, "colors": [ "rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)" ], "decimals": 0, "pattern": "Value #B", "thresholds": [], "type": "number", "unit": "none" }, { "alias": "MAX RT", "align": "", "colorMode": null, "colors": [ "rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)" ], "dateFormat": "YYYY-MM-DD HH:mm:ss", "decimals": 0, "mappingType": 1, "pattern": "Value #C", "thresholds": [], "type": "number", "unit": "ms" }, { "alias": "MEDIAN RT", "align": "auto", "colorMode": null, "colors": [ "rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)" ], "dateFormat": "YYYY-MM-DD HH:mm:ss", "decimals": 0, "mappingType": 1, "pattern": "Value #D", "thresholds": [], "type": "number", "unit": "ms" }, { "alias": "AVG RT", "align": "auto", "colorMode": null, "colors": [ "rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)" ], "dateFormat": "YYYY-MM-DD HH:mm:ss", "decimals": 2, "mappingType": 1, "pattern": "Value #E", "thresholds": [], "type": "number", "unit": "ms" }, { "alias": "Errors Ratio", "align": "auto", "colorMode": null, "colors": [ "rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)" ], "dateFormat": "YYYY-MM-DD HH:mm:ss", "decimals": 2, "mappingType": 1, "pattern": "Value #H", "thresholds": [], "type": "number", "unit": "reqps" }, { "alias": "Requests", "align": "auto", "colorMode": null, "colors": [ "rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)" ], "dateFormat": "YYYY-MM-DD HH:mm:ss", "decimals": 0, "mappingType": 1, "pattern": "Value #F", "thresholds": [], "type": "number", "unit": "none" }, { "alias": "Requests Ratio", "align": "auto", "colorMode": null, "colors": [ "rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)" ], "dateFormat": "YYYY-MM-DD HH:mm:ss", "decimals": 2, "mappingType": 1, "pattern": "Value #G", "thresholds": [], "type": "number", "unit": "reqps" }, { "alias": "Content", "align": "auto", "colorMode": null, "colors": [ "rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)" ], "dateFormat": "YYYY-MM-DD HH:mm:ss", "decimals": 2, "mappingType": 1, "pattern": "Value #I", "thresholds": [], "type": "number", "unit": "bytes" } ], "targets": [ { "expr": "sum(locust_requests_avg_content_length{method=~\".+\"}) by (method, name)", "format": "table", "instant": true, "interval": "", "legendFormat": "", "refId": "I" }, { "expr": "sum(locust_requests_min_response_time{method=~\".+\"}) by (method, name)", "format": "table", "instant": true, "interval": "", "legendFormat": "", "refId": "A" }, { "expr": "sum(locust_requests_max_response_time{method=~\".+\"}) by (method, name)", "format": "table", "instant": true, "interval": "", "legendFormat": "", "refId": "C" }, { "expr": "sum(locust_requests_avg_response_time{method=~\".+\"}) by (method, name)", "format": "table", "instant": true, "interval": "", "legendFormat": "", "refId": "E" }, { "expr": "sum(locust_requests_median_response_time{method=~\".+\"}) by (method, name)", "format": "table", "instant": true, "interval": "", "legendFormat": "", "refId": "D" }, { "expr": "sum(locust_requests_num_failures{method=~\".+\"}) by (method, name)", "format": "table", "instant": true, "interval": "", "legendFormat": "", "refId": "B" }, { "expr": "sum(locust_requests_current_fail_per_sec{method=~\".+\"}) by (method, name)", "format": "table", "instant": true, "interval": "", "legendFormat": "", "refId": "H" }, { "expr": "sum(locust_requests_num_requests{method=~\".+\"}) by (method, name)", "format": "table", "instant": true, "interval": "", "legendFormat": "", "refId": "F" }, { "expr": "sum(locust_requests_current_rps{method=~\".+\"}) by (method, name)", "format": "table", "instant": true, "interval": "", "legendFormat": "", "refId": "G" } ], "timeFrom": null, "timeShift": null, "title": "Endpoints", "transform": "table", "type": "table-old" }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "editable": true, "error": false, "fieldConfig": { "defaults": { "custom": {}, "links": [] }, "overrides": [] }, "fill": 1, "fillGradient": 0, "gridPos": { "h": 8, "w": 12, "x": 0, "y": 14 }, "hiddenSeries": false, "id": 7, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": true, "total": false, "values": false }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "connected", "paceLength": 10, "percentage": false, "pluginVersion": "7.1.0", "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "fail_ratio [%]", "yaxis": 2 } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "rate(locust_requests_num_requests{method=~\".+\"}[1m])", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": " - ", "refId": "A", "step": 2 }, { "expr": " sum(rate(locust_requests_num_requests{method=~\".+\"}[1m]))", "format": "time_series", "interval": "", "intervalFactor": 1, "legendFormat": "total", "refId": "C" }, { "expr": "locust_requests_fail_ratio * 100", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "fail_ratio [%]", "refId": "B", "step": 2 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Requests per endpoint / s", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "reqps", "label": null, "logBase": 1, "max": null, "min": null, "show": true }, { "format": "percent", "label": null, "logBase": 1, "max": null, "min": "0", "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 0, "editable": true, "error": false, "fieldConfig": { "defaults": { "custom": {}, "links": [] }, "overrides": [] }, "fill": 1, "fillGradient": 0, "gridPos": { "h": 8, "w": 12, "x": 12, "y": 14 }, "hiddenSeries": false, "id": 15, "interval": "", "legend": { "avg": false, "current": false, "max": false, "min": false, "show": true, "total": false, "values": false }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "connected", "paceLength": 10, "percentage": false, "pluginVersion": "7.1.0", "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "AVG MAX", "yaxis": 2 }, { "alias": "locust_users{instance=\"le-pod:80\", job=\"locust\"}", "yaxis": 2 }, { "alias": "Users", "yaxis": 2 } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "locust_requests_current_response_time_percentile_95", "interval": "", "intervalFactor": 2, "legendFormat": "P95", "refId": "D", "step": 2 }, { "expr": "locust_requests_current_response_time_percentile_50", "interval": "", "legendFormat": "P50", "refId": "A" }, { "expr": "locust_users", "interval": "", "legendFormat": "Users", "refId": "B" } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Response Times", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "decimals": 0, "format": "ms", "label": null, "logBase": 1, "max": null, "min": null, "show": true }, { "decimals": 0, "format": "none", "label": null, "logBase": 1, "max": null, "min": null, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Google Cloud Monitoring", "fieldConfig": { "defaults": { "custom": {}, "links": [] }, "overrides": [] }, "fill": 1, "fillGradient": 0, "gridPos": { "h": 8, "w": 12, "x": 0, "y": 22 }, "hiddenSeries": false, "id": 23, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 1, "nullPointMode": "null", "percentage": false, "pluginVersion": "7.1.0", "pointradius": 2, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "metricQuery": { "aliasBy": "", "alignmentPeriod": "cloud-monitoring-auto", "crossSeriesReducer": "REDUCE_MEAN", "filters": [], "groupBys": [ "resource.label.instance_id" ], "metricKind": "GAUGE", "metricType": "compute.googleapis.com/instance/cpu/utilization", "perSeriesAligner": "ALIGN_INTERPOLATE", "projectName": "jcpistell-testspace", "unit": "10^2.%", "valueType": "DOUBLE" }, "queryType": "metrics", "refId": "A" } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Looker CPU", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "percentunit", "label": null, "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Google Cloud Monitoring", "fieldConfig": { "defaults": { "custom": {}, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] } }, "overrides": [] }, "fill": 1, "fillGradient": 0, "gridPos": { "h": 8, "w": 12, "x": 12, "y": 22 }, "hiddenSeries": false, "id": 25, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 1, "nullPointMode": "null", "percentage": false, "pluginVersion": "7.1.0", "pointradius": 2, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "metricQuery": { "aliasBy": "", "alignmentPeriod": "cloud-monitoring-auto", "crossSeriesReducer": "REDUCE_NONE", "filters": [], "groupBys": [ "resource.label.instance_id" ], "metricKind": "GAUGE", "metricType": "custom.googleapis.com/looker/puma_threads", "perSeriesAligner": "ALIGN_INTERPOLATE", "projectName": "jcpistell-testspace", "valueType": "DOUBLE" }, "queryType": "metrics", "refId": "A" } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Puma Thread Count", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "$$hashKey": "object:21715", "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true }, { "$$hashKey": "object:21716", "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Google Cloud Monitoring", "fieldConfig": { "defaults": { "custom": {} }, "overrides": [] }, "fill": 1, "fillGradient": 0, "gridPos": { "h": 8, "w": 12, "x": 0, "y": 30 }, "hiddenSeries": false, "id": 37, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": true, "total": false, "values": false }, "lines": true, "linewidth": 1, "nullPointMode": "null", "percentage": false, "pluginVersion": "7.1.0", "pointradius": 2, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "metricQuery": { "aliasBy": "", "alignmentPeriod": "cloud-monitoring-auto", "crossSeriesReducer": "REDUCE_MEAN", "filters": [], "groupBys": [], "metricKind": "DELTA", "metricType": "cloudsql.googleapis.com/database/disk/write_ops_count", "perSeriesAligner": "ALIGN_DELTA", "projectName": "jcpistell-testspace", "unit": "1", "valueType": "INT64" }, "queryType": "metrics", "refId": "A" }, { "metricQuery": { "aliasBy": "", "alignmentPeriod": "cloud-monitoring-auto", "crossSeriesReducer": "REDUCE_MEAN", "filters": [], "groupBys": [], "metricKind": "DELTA", "metricType": "cloudsql.googleapis.com/database/disk/read_ops_count", "perSeriesAligner": "ALIGN_DELTA", "projectName": "jcpistell-testspace", "unit": "1", "valueType": "INT64" }, "queryType": "metrics", "refId": "B" } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Database IOPS", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "$$hashKey": "object:19890", "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true }, { "$$hashKey": "object:19891", "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Google Cloud Monitoring", "fieldConfig": { "defaults": { "custom": {} }, "overrides": [] }, "fill": 1, "fillGradient": 0, "gridPos": { "h": 8, "w": 12, "x": 12, "y": 30 }, "hiddenSeries": false, "id": 33, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 1, "nullPointMode": "null", "percentage": false, "pluginVersion": "7.1.0", "pointradius": 2, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "metricQuery": { "aliasBy": "", "alignmentPeriod": "cloud-monitoring-auto", "crossSeriesReducer": "REDUCE_MEAN", "filters": [], "groupBys": [ "resource.label.database_id" ], "metricKind": "DELTA", "metricType": "cloudsql.googleapis.com/database/cpu/usage_time", "perSeriesAligner": "ALIGN_DELTA", "projectName": "jcpistell-testspace", "unit": "s{CPU}", "valueType": "DOUBLE" }, "queryType": "metrics", "refId": "A" } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Database CPU", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "percent", "label": null, "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Google Cloud Monitoring", "fieldConfig": { "defaults": { "custom": {} }, "overrides": [] }, "fill": 1, "fillGradient": 0, "gridPos": { "h": 8, "w": 12, "x": 0, "y": 38 }, "hiddenSeries": false, "id": 31, "legend": { "alignAsTable": false, "avg": false, "current": false, "max": false, "min": false, "rightSide": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 1, "nullPointMode": "null", "percentage": false, "pluginVersion": "7.1.0", "pointradius": 2, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "metricQuery": { "aliasBy": "", "alignmentPeriod": "cloud-monitoring-auto", "crossSeriesReducer": "REDUCE_NONE", "filters": [], "groupBys": [], "metricKind": "GAUGE", "metricType": "agent.googleapis.com/jvm/memory/usage", "perSeriesAligner": "ALIGN_INTERPOLATE", "projectName": "jcpistell-testspace", "unit": "By", "valueType": "DOUBLE" }, "queryType": "metrics", "refId": "A" } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "JVM Heap Memory", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "$$hashKey": "object:21917", "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true }, { "$$hashKey": "object:21918", "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Google Cloud Monitoring", "fieldConfig": { "defaults": { "custom": {} }, "overrides": [] }, "fill": 1, "fillGradient": 0, "gridPos": { "h": 8, "w": 12, "x": 12, "y": 38 }, "hiddenSeries": false, "id": 29, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": false, "total": false, "values": false }, "lines": true, "linewidth": 1, "nullPointMode": "null", "percentage": false, "pluginVersion": "7.1.0", "pointradius": 2, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "metricQuery": { "aliasBy": "", "alignmentPeriod": "cloud-monitoring-auto", "crossSeriesReducer": "REDUCE_NONE", "filters": [], "groupBys": [], "metricKind": "CUMULATIVE", "metricType": "agent.googleapis.com/jvm/gc/count", "perSeriesAligner": "ALIGN_RATE", "projectName": "jcpistell-testspace", "unit": "1", "valueType": "INT64" }, "queryType": "metrics", "refId": "A" } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Garbage Collections", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "datasource": "Prometheus", "fieldConfig": { "defaults": { "custom": {}, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "semi-dark-red", "value": null } ] }, "unit": "percentunit" }, "overrides": [] }, "gridPos": { "h": 7, "w": 6, "x": 0, "y": 46 }, "id": 21, "options": { "orientation": "auto", "reduceOptions": { "calcs": [ "last" ], "fields": "", "values": false }, "showThresholdLabels": false, "showThresholdMarkers": true }, "pluginVersion": "7.1.0", "targets": [ { "expr": "locust_requests_fail_ratio", "interval": "", "legendFormat": "", "refId": "A" } ], "timeFrom": null, "timeShift": null, "title": "Fails", "type": "gauge" }, { "columns": [], "datasource": "Prometheus", "fieldConfig": { "defaults": { "custom": {} }, "overrides": [] }, "fontSize": "100%", "gridPos": { "h": 7, "w": 18, "x": 6, "y": 46 }, "id": 16, "pageSize": null, "showHeader": true, "sort": { "col": 0, "desc": true }, "styles": [ { "alias": "Time", "align": "auto", "dateFormat": "YYYY-MM-DD HH:mm:ss", "pattern": "Time", "type": "hidden" }, { "alias": "Requests", "align": "auto", "colorMode": null, "colors": [ "rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)" ], "dateFormat": "YYYY-MM-DD HH:mm:ss", "decimals": 0, "mappingType": 1, "pattern": "Value", "thresholds": [], "type": "number", "unit": "none" }, { "alias": "Method", "align": "auto", "colorMode": null, "colors": [ "rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)" ], "dateFormat": "YYYY-MM-DD HH:mm:ss", "decimals": 2, "mappingType": 1, "pattern": "method", "thresholds": [], "type": "string", "unit": "short" }, { "alias": "URL", "align": "auto", "colorMode": null, "colors": [ "rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)" ], "dateFormat": "YYYY-MM-DD HH:mm:ss", "decimals": 2, "mappingType": 1, "pattern": "name", "thresholds": [], "type": "string", "unit": "short" }, { "alias": "Error", "align": "auto", "colorMode": null, "colors": [ "rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)" ], "dateFormat": "YYYY-MM-DD HH:mm:ss", "decimals": 2, "link": false, "mappingType": 1, "pattern": "error", "thresholds": [], "type": "string", "unit": "short" }, { "alias": "", "align": "left", "colorMode": null, "colors": [ "rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)" ], "decimals": 2, "pattern": "/.*/", "thresholds": [], "type": "number", "unit": "short" } ], "targets": [ { "expr": "sum(locust_errors) by (method, name, error)", "format": "table", "hide": false, "instant": true, "interval": "", "intervalFactor": 1, "legendFormat": "", "refId": "A" } ], "timeFrom": null, "timeShift": null, "title": "Errors", "transform": "table", "type": "table-old" } ], "refresh": "10s", "schemaVersion": 26, "style": "dark", "tags": [], "templating": { "list": [] }, "time": { "from": "now-3h", "to": "now" }, "timepicker": { "refresh_intervals": [ "10s", "30s", "1m", "5m", "15m", "30m", "1h", "2h", "1d" ], "time_options": [ "5m", "15m", "1h", "6h", "12h", "24h", "2d", "7d", "30d" ] }, "timezone": "browser", "title": "Locust GCP Looker", "uid": "RGRtGt7Mk", "version": 1 } 
